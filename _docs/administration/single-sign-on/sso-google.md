---
title: "Google Single Sign-On (SSO)"
description: ""
group: administration
sub_group: single-sign-on
toc: true
---

Setting up SSO for Google in Codefresh requires you to create a client secret for Codefresh in Google, configure SSO settings in Codefresh and then define the redirect URIs, also in Google.  
For general instructions on SSO setup, see the [overview]({{site.baseurl}}/docs/administration/single-sign-on/sso-setup-oauth2/).


### Create Client Secret

1. Log in to [https://console.developers.google.com/](https://console.developers.google.com/).
1. From the sidebar, select **Credentials**.
1. Select **Create Credentials**, and from the drop-down, select **OAuth client ID**.
1. Do the following:
  * From the **Application type** drop-down, select **Web application**. 
  * Enter a **Name** for your integration (user-defined).  
  * For **Authorized JavaScript origins**, **URIs**, enter, `https://g.codefresh.io`.   
    
    {% include image.html 
       lightbox="true" 
       file="/images/administration/sso/google/googleSSO.png" 
       url="/images/administration/sso/google/googleSSO.png"
       alt="Creating an OAuth client"
       caption="Creating an OAuth client"
       max-width="30%"
       %}

  * Select **Create**. 
  * From the OAUth client created dialog, note down **Your Client ID** and **Your Client Secret**. 

   {% include image.html 
       lightbox="true" 
       file="/images/administration/sso/google/googleSSO2.png" 
       url="/images/administration/sso/google/googleSSO2.png"
       alt="Getting the Client ID and secret"
       caption="Getting the Client ID and secret"
       max-width="30%"
       %}

You will need the Client ID and secret to configure SSO for Google in Codefresh.


### Configure SSO for Google in Codefresh

1. In the Codefresh UI, go to [Single Sign-On](https://g.codefresh.io/2.0/account-settings/single-sign-on){:target="\_blank"}.
1. Select **+ Add Single Sign-On**, **Google**, and then **Next**.


 {% include image.html 
 lightbox="true" 
 file="/images/administration/sso/google/sso-csdp-google.png" 
  url="/images/administration/sso/google/sso-csdp-google.png"
  alt="SSO settings for Google in Codefresh"
  caption="SSO settings for Google in Codefresh"
  max-width="30%"
  %}

{:start="3"}
2. Enter the following: 
  * **Client Name**: For auto-generation, leave empty. Codefresh generates the client name once you save the settings.  
  * **Display Name**: Meaningful name that identifies the SSO provider.
  * **Client ID**: The Client ID generated by Google.  
  * **Client secret**: The Client Secret also generated by Google. 
    
{:start="4"}
1. Select **Save**. Codefresh generates the Client Name. 

  {% include image.html 
  lightbox="true" 
  file="/images/administration/sso/google/autogenerated-name.png" 
  url="/images/administration/sso/google/autogenerated-name.png"
  alt="Getting the auto-generated Client Name"
  caption="Getting the auto-generated Client Name"
  max-width="90%"
  %}

{:start="5"}
1. Note down the Client Name, as you need it to set the redirect URI in Google.

### Set up Redirect URI
1. Go back to the Google Console Developer dashboard, and click the edit button on the OAuth 2.0 Client IDs that you created before.
1. For **Authorized Redirect URIs**, in the **URIs** field, enter the Client Name you noted down to generate the *Authorized Redirect URIs*
  * Example Client Name: `t0nlUJoqQlDv`
  * Example Redirect URI: `https://g.codefresh.io/api/auth/t0nlUJoqQlDv/callback`
  
   {% include image.html 
  lightbox="true" 
  file="/images/administration/sso/google/googleSSO3.png" 
  url="/images/administration/sso/google/googleSSO3.png"
  alt="Redirect URI"
  caption="Redirect URI"
  max-width="30%"
  %}

This concludes the basic SSO setup for Google. 

### Synchronize teams via Codefresh CLI

For team/group synchronization you also need a service account. 
In the Codefresh configuration screen there are some optional fields that you can fill, in order to 
get team synchronization via the Codefresh CLI. You need to create a service account and [delegate user and group permissions](https://developers.google.com/admin-sdk/directory/v1/guides/delegation) to it.

1. Create a Service account in Google Console:

 ÃŸ{% include image.html 
  lightbox="true" 
  file="/images/administration/sso/google/serviceAccount2.png" 
  url="/images/administration/sso/google/serviceAccount2.png"
  alt="Creating a service account"
  caption="Creating a service account"
  max-width="30%"
  %}

{:start=2"}
1. Delegate from the Google admin console the following permissions:
  * `https://www.googleapis.com/auth/admin.directory.user.readonly`
  * `https://www.googleapis.com/auth/admin.directory.group.readonly`

{:start="3"}
1. For that service account, create a private key in JSON format.
    
  {% include image.html 
     lightbox="true" 
     file="/images/administration/sso/google/serviceAccount3.png" 
     url="/images/administration/sso/google/serviceAccount3.png"
     alt="Creating a JSON key"
     caption="Creating a JSON key"
    max-width="30%"
  %}

{:start="4"}
1. Save the file locally.  
1. Go back to Codefresh, and in the Google SSO settings page, enter the following:
  * `JSON Keyfile`: The contents of the JSON file
  * `Admin email`: The user `admin.google.com`

Now you can [synchronize teams using the Codefresh CLI]({{site.baseurl}}/docs/administration/single-sign-on/sso-setup-oauth2/#syncing-of-teams-after-initial-sso-setup).

#### What to read next
See the [overview page]({{site.baseurl}}/docs/administration/single-sign-on/sso-setup-oauth2/#testing-your-identity-provider) on how to test the integration, activate SSO for collaborators and create sync jobs.