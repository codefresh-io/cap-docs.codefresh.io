---
title: "Okta Single Sign-On (SSO)"
description: " "
group: administration
sub_group: single-sign-on
redirect_from:
  - /docs/enterprise/single-sign-on/sso-okta/
toc: true
---

In this page we will see the process of setting up Okta SSO with Codefresh. For the general instructions of SSO setup
see the [overview page]({{site.baseurl}}/docs/administration/single-sign-on/sso-setup-oauth2/).

### Set up Okta as an Identity provider

1. Log in to your Okta account, or create an Okta account if you don't have one. 
1. On the general Okta dashboard, to open the Okta Admin Dashboard select **Admin**.
   
   {% include image.html 
  lightbox="true" 
  file="/images/administration/sso/okta/image5.png" 
  url="/images/administration/sso/okta/image5.png"
  alt="Okta Dashboard"
  caption="Okta Dashboard"
  max-width="70%"
  %}

{:start="3"}
1. From the list of shortcuts on the right, select **Add Applications**.
   
   {% include image.html 
  lightbox="true" 
  file="/images/administration/sso/okta/image8.png" 
  url="/images/administration/sso/okta/image8.png"
  alt="Okta Applications"
  caption="Okta Applications"
  max-width="70%"
  %}

{:start="4"}
1. Select **Create New App**.
   
   {% include image.html 
  lightbox="true" 
  file="/images/administration/sso/okta/image9.png" 
  url="/images/administration/sso/okta/image9.png"
  alt="Create new application"
  caption="Create new application"
  max-width="70%"
  %}

{:start="5"}
1. In the Create a New Application Integration pop-up, do the following:
   * From the **Platform** drop-down, select **Web** as the platform for Codefresh.
   * For the **Sign on method**, select **OpenID Connect**. 
   * Select **Create**.

     {% include image.html 
  lightbox="true" 
  file="/images/administration/sso/okta/image1.png" 
  url="/images/administration/sso/okta/image1.png"
  alt="Choose Sign-on method"
  caption="Choose Sign-on method"
  max-width="70%"
  %}

{:start="6"}
1. Configure OIDC integration in **General Settings**:
  * App name (e.g. Codefresh).
  * App logo (optional). Feel free to download and add this [picture]({{site.baseurl}}/images/administration/sso/okta/codefresh-logo.png).
  * Login redirect URI: `https://g.codefresh.io/api/auth/<your_codefresh_client_name>/callback`  
  where <your_codefresh_client_name> is generated by Codefresh when you configure SSO settings. For now, use a temp value such as `https://g.codefresh.io/api/auth/temp/callback`.
  
   {% include image.html 
   lightbox="true" 
   file="/images/administration/sso/okta/image4.png" 
   url="/images/administration/sso/okta/image4.png"
   alt="OpenID integration"
   caption="OpenID integration"
   max-width="70%"
   %}
   * Select **Save**.

### Okta settings needed for SSO in CSDP
To configure SSO settings for Okta in CSDP, you meed the Client ID, Client Secret, Access token, and the CSDP application ID as defined in Okta.
Copy the values from the following screens:

{% include image.html 
lightbox="true" 
file="/images/administration/sso/okta/image7.png" 
url="/images/administration/sso/okta/image7.png"
alt="Client ID and secret"
caption="Client ID and secret"
max-width="70%"
%}

{% include image.html 
lightbox="true" 
file="/images/administration/sso/okta/image2.png" 
url="/images/administration/sso/okta/image2.png"
alt="Access token"
caption="Access token"
max-width="70%"
%}

{% include image.html 
lightbox="true" 
file="/images/administration/sso/okta/image3.png" 
url="/images/administration/sso/okta/image3.png"
alt="App ID"
caption="App ID"
max-width="70%"
%}

### Configure SSO for Okta in CSDP
1. In CSDP, go to the SSO settings for Okta.
1. Enter the following:
  * **Client Name**: For-auto generation, leave empty. CSDP generates the client name once you save the settings.
  * **Display Name**: The Application name in OKTA.
  * **Client ID**: The OKTA application client ID you copied from Okta (see above).
  * **Client Secret**: The OKTA application client secret you copied from OKta (see above).
  * **Client Host**: The OKTA organization URL, for example, `https://<company>.okta.com`.   
    Do not copy the URL from the admin view (e.g. `https://<company>-admin.okta.com`), as it will not work.
  * **Access Token**: Optional. The OKTA API token used to sync groups and their users from OKTA to Codefresh. The token can be generated in OKTA by going to the security tab->API (see above).
  * **Application ID**: The Codefresh application ID in your OKTA organization, that will be used to sync groups and user from OKTA to Codefresh. This ID can be taken by navigating to your Codefresh APP in OKTA and copy it from the URL (see above).
1. Optional. To automatically sync teams or groups in Okta to Codefresh, set **Auto group sync** to **ON**. This action syncs groups every 12 hours.  
1. Select **Save**. Codefresh automatically generates the **Client Name** to which to identify the SSO configuration.
  Note it down. 
   
   {% include image.html 
  lightbox="true" 
  file="/images/administration/sso/okta/image6.png" 
  url="/images/administration/sso/okta/image6.png"
  alt="Client name"
  caption="Client name"
  max-width="50%"
  %}

### Configure URIs in Okta
1. In the Okta application, go to **General Settings**, and update the following with the client name generated by CSDP:
   * Login redirect URIs - `https://g.codefresh.io/api/auth/<your_codefresh_client_name>/callback`
   * Initiate login URI - `https://g.codefresh.io/api/auth/<your_codefresh_client_name>`

You have now completed SSO setup for Okta. 

### How Okta syncing works
[Syncing with Okta]({{site.baseurl}}/docs/administration/single-sign-on/sso-setup-oauth2/#syncing-of-teams-after-initial-sso-setup)
only affects teams/groups, and not individual users.

CSDP only syncs users who are part of teams, though you can assign an Okta application to both groups and individual users. 
New users in Okta, _not_ assigned to a team, are **NOT** synced with CSDP. You should first assign the user to a team for the sync to work.

### Sync teams after initial SSO setup
There are two ways to set up automatic syncing of teams:

* Pipeline running a CLI command: Create a CSDP pipeline the runs the CLI command `codefresh synchronize teams my-okta-client-name -t okta` as explained in the [pipeline sync page]({{site.baseurl}}/docs/administration/single-sign-on/sso-setup-oauth2/#syncing-of-teams-after-initial-sso-setup).
* Turn on the auto-sync toggle as part of the SSO configuration settings.:
   {% include image.html 
  lightbox="true" 
  file="/images/administration/sso/okta/auto-group-sync.png" 
  url="/images/administration/sso/okta/auto-group-sync.png"
  alt="Automatic team syncing"
  caption="Automatic team syncing"
  max-width="50%"
  %}

### What to read next
See the [overview page]({{site.baseurl}}/docs/administration/single-sign-on/sso-setup-oauth2/#testing-your-identity-provider) on how to test the integration, activate SSO for collaborators and create sync jobs.

